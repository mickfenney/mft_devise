<div class="content round">
  <div class="row">
    <div class="span12">
      
      <%= render 'layouts/messages' %>

      <h3>Users</h3>

      <%= simple_form_for(:users, :url => users_path, :method => :get, :html => {:class => 'form-horizontal'}) do |f| %>
        <div class="form-inputs">
          <%= f.input 'Username Or Email', :wrapper => :prepend do %>
            <span class="add-on"><i class="icon-search"></i></span><%= text_field_tag :search, params[:search] %>
          <% end %>
        </div>
        <div class="form-actions">
          <%= f.button :submit, "Search", :name => nil, :class => 'btn btn-primary' %>
        </div>   
      <% end %>
      
      <% if  @users.any? %>
        <%= pagination_links(@users) %>
        <section id="no-more-tables"> 
        <table class="table table-striped table-bordered table-condensed">
          <thead>
            <tr>
              <th ></th>
              <th>Username</th>
              <th>Email</th>
              <th>Registered</th>
              <th>Roles</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= image_tag avatar_url(user), :class => 'round' %></td>
              <td id="hint"><%= link_to user.name, user, :title => (user.phone? ? [user.name, user.phone].join(" - ") : [user.name, user.email].join(" - ")), :'data-placement' => 'right' %></td>
              <td data-title="Email"><a href="mailto:<%= user.email %>"><%= user.email %></a></td>
              <td data-title="Registered"><%= user.created_at.to_date %></td>
              <td data-title="Roles"><% user.roles.each do |role| %><%= role.name.titleize %> <% end %></td>
              <td>
                <a data-toggle="modal" href="#role-options-<%= user.id %>" class="btn btn-mini btn-primary" type="button">Change roles</a>
                <%= render user %>
              </td>
              <td><%= link_to("Delete user", user_path(user), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn btn-mini btn-danger') unless user == current_user %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
        </section>
      <% end %> 

    </div>
  </div>
</div>

<script>
$("#hint a").tooltip()
</script>








