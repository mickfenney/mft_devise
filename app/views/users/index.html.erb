<div class="content round">
  <div class="row">
    <div class="span12">
      
      <%= render 'layouts/messages' %>

      <% unless  @users.any? %>
        <div class="alert alert-info">
          <a class="close" data-dismiss="alert">&#215;</a>
          <%= content_tag :div, "You search for '<b>#{params[:search]}</b>' did not return any results".html_safe, :id => "flash_info" %>
        </div>
      <% end %>

      <h3>Users</h3>

      <%= simple_form_for(:users, :url => users_path, :method => :get, :html => {:class => 'form-horizontal'}) do |f| %>
        <div class="form-inputs">
        <div class="control-group search optional user_search">
        <label class="search optional control-label" for="user_email">Username Or Email </label>
        <div class="controls"><div class="input-prepend">
        <span class="add-on"><i class="icon-search"></i></span><%= text_field_tag :search, params[:search] %></div></div></div>
        <div class="form-actions">
          <%= f.button :submit, "Search", :name => nil, :class => 'btn btn-primary' %>
        </div>   
      <% end %>
      
      <% if  @users.any? %>
        <%= pagination_links(@users) %>
        <section id="no-more-tables"> 
        <table class="table table-striped table-bordered table-condensed">
          <thead>
            <tr>
              <th ></th>
              <th>Username</th>
              <th>Email</th>
              <th>Registered</th>
              <th>Roles</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><div class="middle"><%= image_tag avatar_url(user), :class => 'round' %></div></td>
              <td id="hint"><%= link_to user.name, user, :title => (user.phone? ? [user.name, user.phone].join(" - ") : [user.name, user.email].join(" - ")), :'data-placement' => 'right' %></td>
              <td data-title="Email"><a href="mailto:<%= user.email %>"><%= user.email %></a></td>
              <td data-title="Registered"><%= user.created_at.to_date %></td>
              <td data-title="Roles"><% user.roles.each do |role| %><%= role.name.titleize %> <% end %></td>
              <td>
                <a data-toggle="modal" href="#role-options-<%= user.id %>" class="btn btn-mini btn-primary" type="button">Change roles</a>
                <%= render user %>
              </td>
              <td><%= link_to("Delete user", user_path(user), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn btn-mini btn-danger') unless user == current_user %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
        </section>
      <% end %> 

    </div>
  </div>
</div>

<script>
$("#hint a").tooltip()
</script>








